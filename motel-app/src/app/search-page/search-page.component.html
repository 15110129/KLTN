<app-nav-bar></app-nav-bar>
<div class="space"></div>
<div class="container">
  <div class="row">
    <div class="col-lg-12 bc">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a routerLink="/home">Trang chủ</a></li>
          <li class="breadcrumb-item active" aria-current="page">Tìm kiếm</li>
        </ol>
      </nav>
    </div>
  </div>
</div>
<app-search></app-search>
<div class="space"></div>
<div class="container">
  <div class="row">
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
      <div class="text-center">
        <p id="news">Kết quả tìm kiếm</p>
        <hr>
      </div>
    </div>
  </div>
</div>
<div class="space"></div>
<div class="container">
  <div class="row">
    <div class="col-lg-12" *ngIf="searchForm.xCoordinate && searchForm.yCoordinate && searchForm.radius">
      <agm-map [latitude]="lat"
               [longitude]="lng"
               [zoom]=zoom
               [disableDefaultUI]="false"
               [zoomControl]="false">
        <agm-marker
          *ngFor="let postDTO of postDTOs"
          [latitude]="postDTO.accomodationDTO.xCoordinate"
          [longitude]="postDTO.accomodationDTO.yCoordinate"
          [label]="(postDTO.accomodationDTO.price/1000000).toString()"
          draggable="false">
          <agm-info-window>{{postDTO.accomodationDTO.address}}</agm-info-window>
        </agm-marker>
        <agm-circle [latitude]="lat"
                    [longitude]="lng"
                    [radius]="radius*1000"
                    [fillColor]="'red'"
                    [fillOpacity]=0.2>
        </agm-circle>
      </agm-map>
    </div>
  </div>
</div>
<div class="space"></div>
<div class="container">
  <div class="row">
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="postDTOs">
      <div class="row bor" *ngFor="let postDTO of postDTOs | paginate: { id: 'server', itemsPerPage: 10, currentPage: page, totalItems: totalElements }">
        <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
          <div class="row">
            <div class="view overlay">
              <img [ngStyle]="{'height': innerWidth<576 ?'200px': '170px'}"
                   src="{{postDTO.imageStrings[0] || '../../assets/default-img.jpg'}}"
                   width="350px" height="232.9px" alt="Card image cap">
              <a>
                <div class="mask rgba-white-slight" routerLink="/post/{{postDTO.id}}"></div>
              </a>
            </div>
          </div>
        </div>
        <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9 col-12">
          <div class="title" [ngStyle]="{'margin-bottom': innerWidth<1200 ?'-10px':'0'}">
            <a routerLink="/post/{{postDTO.id}}">{{postDTO.title}}</a>
          </div>
          <p class="address" [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">Địa chỉ: <span
            class="address-content">{{postDTO.accomodationDTO.address}}</span></p>
          <div class="row">
            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-6 col-6">
              <p class="acreage" [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">Diện tích: <span
                class="acreage-content">{{postDTO.accomodationDTO.acreage}} m²</span></p>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-6">
              <p *ngIf="postDTO.accomodationDTO.motel" class="type"
                 [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">Loại: <span
                class="type-content"> Phòng trọ</span></p>
              <p *ngIf="!postDTO.accomodationDTO.motel" class="type"
                 [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">Loại: <span
                class="type-content"> Nhà nguyên căn</span></p>
            </div>
            <div *ngIf="innerWidth>=768" class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-6">
              <div class="text-right">
                <p class="time"
                   [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">{{postDTO.createAt | date:'dd/MM/yyyy'}}</p>
              </div>
            </div>
            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-6 col-6">
              <p class="price" [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">Giá: <span
                class="price-content">{{postDTO.accomodationDTO.price | number}} VNĐ/tháng</span></p>
            </div>

            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-6 col-6">
              <p class="status" *ngIf="postDTO.accomodationDTO.status"
                 [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">Tình trạng: <span
                class="status-content-con">Còn</span></p>
              <p class="status" *ngIf="!postDTO.accomodationDTO.status"
                 [ngStyle]="{'margin-bottom': innerWidth<1200 ?'5px':'10px'}">Tình trạng: <span
                class="status-content">Hết</span></p>
            </div>

            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
              <p class="util">Tiện ích:
                <span *ngIf="postDTO.accomodationDTO.toilet === KHEP_KIN"><i class="fas fa-toilet" data-toggle="tooltip"
                                                                             data-placement="bottom"
                                                                             title="Toilet riêng"></i></span>
                <span *ngIf="postDTO.accomodationDTO.parking"><i class="fas fa-parking" data-toggle="tooltip"
                                                                 data-placement="bottom"
                                                                 title="Chỗ đậu xe"></i></span>
                <span *ngIf="postDTO.accomodationDTO.internet"><i class="fas fa-wifi" data-toggle="tooltip"
                                                                  data-placement="bottom" title="Wifi"> </i> </span>
                <span *ngIf="postDTO.accomodationDTO.airConditioner"><i class="fas fa-snowflake" data-toggle="tooltip"
                                                                        data-placement="bottom" title="Điều hòa"> </i> </span>
                <span *ngIf="postDTO.accomodationDTO.tv"><i class="fas fa-tv" data-toggle="tooltip"
                                                            data-placement="bottom" title="Tivi"> </i> </span>
                <span *ngIf="postDTO.accomodationDTO.heater"><i class="fas fa-shower" data-toggle="tooltip"
                                                                data-placement="bottom"
                                                                title="Máy nước nóng"></i> </span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center" *ngIf="!searchForm.xCoordinate">
        <pagination-controls (pageChange)="getPage($event)" id="server"></pagination-controls>
      </div>
    </div>
  </div>
</div>
<app-footer *ngIf="postDTOs"></app-footer>
